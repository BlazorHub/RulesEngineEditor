@using RulesEngineEditor.Models
@inject RulesEngineEditor.Services.WorkflowService WorkflowService

@if (rules != null)
{
    <Dropzone Items="rules">
        <rules>
            <RuleEditor rule="@context" RuleDelete="DeleteRule" />
        </rules>
    </Dropzone>
}
@code {
    private List<RuleData> _rules;
    [Parameter]
    public List<RuleData> rules
    {
        get { return _rules; }
        set { _rules = value; StateHasChanged(); }
    }

    [Parameter]
    public EventCallback<List<RuleData>> RulesChanged { get; set; }

    public override async Task SetParametersAsync(ParameterView parameters)
    {
        await base.SetParametersAsync(parameters);
    }

    private void DeleteRule(RuleData sp)
    {
        rules.RemoveAll(w => w.RuleName == sp.RuleName);
        RulesChanged.InvokeAsync(rules);
    }
    }
